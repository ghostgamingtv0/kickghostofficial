<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KICKGHOST</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@6.10.0/dist/ethers.umd.min.js"></script>
</head>
<body class="bg-black text-white text-center p-6">

<img src="https://i.postimg.cc/QxwZ3rtb/fe17c807e4ae7e98a858b5142f8b982e.jpg"
class="w-28 mx-auto rounded-full border-4 border-green-500"/>

<h1 class="text-4xl font-black mt-4">KICK<span class="text-green-500">GHOST</span></h1>

<div class="flex justify-center gap-6 mt-3">
<a href="https://kick.com/ghost_gamingtv" target="_blank">Kick</a>
<a href="https://www.instagram.com/ghost.gamingtv/" target="_blank">Instagram</a>
<a href="https://x.com/tv_ghostgaming" target="_blank">Twitter</a>
</div>

<button onclick="loginWithKick()" class="mt-6 bg-green-600 text-black px-6 py-3 rounded-xl font-bold">
LOGIN WITH KICK
</button>

<button onclick="connectWallet()" class="mt-6 bg-green-500 text-black px-6 py-3 rounded-xl font-bold">
CONNECT WALLET
</button>
<p id="wallet" class="mt-3 break-all text-sm"></p>

<button onclick="claim()" class="mt-6 bg-white text-black px-6 py-3 rounded-xl font-bold">
CLAIM 1000 (WEEKLY)
</button>
<p id="msg" class="mt-4 font-bold"></p>

<script>
let userAddress = null;

function loginWithKick(){
  window.location.href = "/api/kick/login";
}

async function connectWallet(){
 if(window.ethereum){
  const provider = new ethers.BrowserProvider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  const signer = await provider.getSigner();
  userAddress = await signer.getAddress();
  document.getElementById("wallet").innerText = userAddress;
 } else {
  alert("Install MetaMask / TrustWallet / Coinbase");
 }
}

async function claim(){
 if(!userAddress){ alert("Connect wallet first"); return; }
 const res = await fetch("/api/claim",{
  method:"POST",
  headers:{ "Content-Type":"application/json" },
  body:JSON.stringify({ address: userAddress })
 });
 const data = await res.json();
 document.getElementById("msg").innerText = data.message;
}
</script>

</body>
</html>
